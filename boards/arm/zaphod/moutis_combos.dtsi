/*
*
* Copyright (c) 2021 lowprokb.ca
* SPDX-License-Identifier: MIT
* 
*/

#define COMBO_LAYER(NAME, BINDINGS, KEYPOS, LAYERS) \
  combo_##NAME { \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <LAYERS>; \
    timeout-ms = <40>; \
};
#define COMBO_ANY(NAME, BINDINGS, KEYPOS) \
  combo_##NAME { \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    timeout-ms = <40>; \
};


combos {
    compatible = "zmk,combos";

/*    KEY POSITIONS for Zaphod
╭────────────────╮ ╭────────────────╮
│  0  1  2  3  4 │ │  5  6  7  8  9 │
│ 10 11 12 13 14 │ │ 15 16 17 18 19 |
| 20 21 22 23 24 │ │ 25 26 27 28 29 |
╰────────╮ 30 31 | | 32 33 ╭────────╯
         ╰───────╯ ╰───────╯   */
//
// control/modes
//
COMBO_ANY(enmode, &kp LANG2, 11 12 13)
COMBO_ANY(jpmode, &kp LANG1, 16 17 18)
COMBO_ANY(settings, &mo l_cfg, 32 33) // get the settings/media layer from anywhere
COMBO_ANY(appswitch, &kp RG(TAB), 30 31) // App switch
//
// H Digraphs REQUIRE macros (defined earlier) to process
//
COMBO_LAYER(sch, &trigraphSch, 10 11 12, l_alpha) // Sch
COMBO_LAYER(tch, &trigraphTch, 10 11 13, l_alpha) // Tch
COMBO_LAYER(th, &digraphTh, 12 13, l_alpha) // Th
COMBO_LAYER(sh, &digraphSh, 11 12, l_alpha) // Sh
COMBO_LAYER(ch, &digraphCh, 11 13, l_alpha) // Ch
COMBO_LAYER(wh, &digraphWh,  1  2, l_alpha) // Wh
COMBO_LAYER(gh, &digraphGh,  2  3, l_alpha) // Gh
COMBO_LAYER(ph, &digraphPh, 21 23, l_alpha) // Ph

//
// Editing actions (&whitespace)
//
COMBO_ANY(Gent, &kp LG(RETURN), 22 23 24)
COMBO_ANY(entr, &kp RETURN, 23 24)
COMBO_ANY(tab, &kp TAB, 10 11)
COMBO_ANY(spce, &kp SPACE, 13 14)
COMBO_ANY(esc, &kp ESC, 10 13)
COMBO_ANY(sall, &kp LG(A), 20 23)
COMBO_ANY(selword, &m_selword, 20 24)
COMBO_ANY(undo, &kp LG(Z), 20 21)
COMBO_ANY(cut, &kp LG(X), 20 22)
COMBO_ANY(copy, &kp LG(C), 21 22)
COMBO_ANY(pste, &kp LG(V), 22 23)
COMBO_ANY(cloz, &kp LG(W), 14 12)
COMBO_ANY(new, &kp LG(N), 10 14)
COMBO_ANY(open, &kp LG(O), 0 4)
COMBO_ANY(quit, &kp LG(Q), 14 11)
COMBO_ANY(findsel, &m_findsel, 10 24)
         
/* type a glyph */
COMBO_LAYER(typeQ, &typeQu, 1 3, l_alpha)
COMBO_LAYER(typeZ, &kp Z, 0 1, l_alpha)
COMBO_LAYER(typeColn, &kp COLON, 6 9, l_alpha)
COMBO_LAYER(typeSemi, &kp SEMI, 6 8, l_alpha)
COMBO_LAYER(typeExcl, &kp EXCL, 6 7, l_alpha)
COMBO_LAYER(typeQues, &kp QMARK, 7 8, l_alpha)
COMBO_LAYER(typeGrav, &kp GRAVE, 8 9, l_alpha)
COMBO_LAYER(typeatMk, &kp AT_SIGN, 5 6, l_alpha)
COMBO_LAYER(typeUnder, &kp UNDER, 26 28, l_alpha) // _
COMBO_LAYER(typeEqual, &kp EQUAL, 27 28, l_alpha) // =
COMBO_LAYER(typePercent, &kp LS(N5), 28 29, l_alpha) // percent
COMBO_LAYER(typeNdash, &kp LA(MINUS), 25 26, l_alpha) // N-dash (minus)
COMBO_LAYER(typeMdash, &kp LA(LS(MINUS)), 25 27, l_alpha) // M-dash (minus)
COMBO_LAYER(typeTilde, &kp TILDE, 25 29, l_alpha) // tilde (not dead key)

COMBO_LAYER(ligAE, &kp LA(APOS), 16 26, l_alpha) // ligature æ
COMBO_LAYER(ligOE, &kp LA(Q), 17 27, l_alpha) // ligature œ

COMBO_LAYER(diacAccent, &kp LA(E), 16 17, l_alpha) // ´
COMBO_LAYER(diacGrave, &kp LA(GRAVE), 17 18, l_alpha) // `
COMBO_LAYER(diacAcute, &kp LA(N6), 16 18, l_alpha) // ˆ
COMBO_LAYER(diacMacron, &kp LA(A), 17 19, l_alpha) // ¯
COMBO_LAYER(diacCirc, &kp LA(K), 16 19, l_alpha) // ˚
COMBO_LAYER(diacUmlaut, &kp LA(U), 26 27, l_alpha) // ¨

/* numpad symbol combos */
/*
COMBO_LAYER(numLPRN, &kp LPAR, 16 17, l_num)
COMBO_LAYER(numRPRN, &kp RPAR, 17 18, l_num)
COMBO_LAYER(numEQUAL, &kp EQUAL, 18 19, l_num)
COMBO_LAYER(numCOLN, &kp COLON, 16 18, l_num)
COMBO_LAYER(numPRCNT, &kp PRCNT, 28 29, l_num)
COMBO_LAYER(numLT, &kp LT, 15 16, l_num)
COMBO_LAYER(numGT, &kp GT, 15 19, l_num)
COMBO_LAYER(numDASH, &kp LA(MINUS), 25 26, l_num)
COMBO_LAYER(numTILD, &kp TILDE, 25 29, l_num)
COMBO_LAYER(numELIP, &kp LA(SEMI), 26 29, l_num)

COMBO_LAYER(numDLLR, &kp DLLR, 6 7, l_num) //
COMBO_LAYER(numCENT, &kp LA(N4), 6 8, l_num)
COMBO_LAYER(numEURO, &kp LS(LA(N2)), 7 8, l_num)
COMBO_LAYER(numYEN, &kp LA(Y), 8 9, l_num)
COMBO_LAYER(numBPND, &kp LA(N3), 5 6, l_num)
*/

#ifdef EN_PRONOUN_COMBOS
//
// Pronoun combos REQUIRE macros to process
//

COMBO_LAYER(pnI, &typePnI, 18 19, l_alpha) // "I "

COMBO_LAYER(pnIm, &typePnIm, 18 2, l_alpha) // "I'm "
COMBO_LAYER(pnIll, &typePnIll, 18 22, l_alpha) // "I'll "
COMBO_LAYER(pnId, &typePnId, 18 23, l_alpha) // "I'd "
COMBO_LAYER(pnIve, &typePnIve, 18 24 , l_alpha) // "I've "

COMBO_LAYER(pnYoure, &typePnYoure, 28 31, l_alpha) // "You're "
COMBO_LAYER(pnYoull, &typePnYoull, 28 22, l_alpha) // "You'll "
COMBO_LAYER(pnYoud, &typePnYoud, 28 23, l_alpha) // "You'd "
COMBO_LAYER(pnYouve, &typePnYouve, 28 24, l_alpha) // "You've "
/*
COMBO_LAYER(pnWere, &typePnWere, 0 31, l_alpha) // "We're "
COMBO_LAYER(pnWell, &typePnWell, 0 2, l_alpha) // "We'll "
COMBO_LAYER(pnWed, &typePnWed, 0 3, l_alpha) // "We'd "
COMBO_LAYER(pnWeve, &typePnWeve, 0 4, l_alpha) // "We've "
*/
#endif // EN_PRONOUN_COMBOS


};
